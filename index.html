<!doctype html>
<html lang="mn">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Валентины мэндчилгээ</title>
<style>
  :root{
    --bg1:#0b0610; --bg2:#16081d;
    --glass: rgba(255,255,255,.10);
    --glass2: rgba(255,255,255,.06);
    --border: rgba(255,255,255,.16);
    --text:#fff;
    --muted: rgba(255,255,255,.78);
    --accent:#ff4d8d;
    --accent2:#ff86b2;
    --shadow: 0 22px 70px rgba(0,0,0,.55);
    --r: 22px;
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", sans-serif;
    color:var(--text);
    overflow:hidden;
    background:
      radial-gradient(1200px 700px at 20% 10%, rgba(255,77,141,.22), transparent 55%),
      radial-gradient(1000px 650px at 85% 40%, rgba(255,134,178,.18), transparent 58%),
      radial-gradient(900px 520px at 55% 85%, rgba(255,255,255,.06), transparent 60%),
      linear-gradient(160deg, var(--bg1), var(--bg2));
  }

  .glow{
    position:fixed; inset:-40px; z-index:-3;
    background:
      radial-gradient(520px 280px at 10% 25%, rgba(255,77,141,.16), transparent 65%),
      radial-gradient(540px 300px at 85% 70%, rgba(255,134,178,.14), transparent 62%);
    filter: blur(14px);
    animation: floatGlow 8s ease-in-out infinite alternate;
  }
  @keyframes floatGlow{
    from{transform: translate3d(0,0,0) scale(1); opacity:.85}
    to{transform: translate3d(0,-14px,0) scale(1.04); opacity:1}
  }

  canvas#hearts{position:fixed; inset:0; z-index:-2; pointer-events:none}

  .wrap{
    height:100%;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:18px;
  }

  .card{
    width:min(980px, 100%);
    border-radius: var(--r);
    background: linear-gradient(180deg, var(--glass), var(--glass2));
    border:1px solid var(--border);
    box-shadow: var(--shadow);
    overflow:hidden;
    position:relative;
    backdrop-filter: blur(16px);
  }

  .hero{
    padding: 34px 22px 26px;
    text-align:center;
  }
  .title{
    margin:0;
    font-size: clamp(26px, 3.8vw, 46px);
    line-height:1.12;
    letter-spacing:.4px;
    text-shadow: 0 10px 30px rgba(0,0,0,.35);
  }

  .btnRow{display:flex; justify-content:center; gap:10px; margin-top:16px}
  .btn{
    appearance:none; border:0; cursor:pointer;
    padding: 13px 18px;
    border-radius:999px;
    font-weight:800;
    font-size:15px;
    color:#1a0610;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    box-shadow: 0 16px 40px rgba(255,77,141,.30);
    transition: transform .12s ease, filter .2s ease;
    user-select:none;
  }
  .btn:active{transform: translateY(1px) scale(.99)}
  .btn:hover{filter: brightness(1.03)}

  .btnSmall{
    appearance:none;
    cursor:pointer;
    padding: 10px 14px;
    border-radius:999px;
    font-weight:800;
    font-size:13px;
    color: rgba(255,255,255,.92);
    background: rgba(0,0,0,.20);
    border: 1px solid rgba(255,255,255,.18);
    backdrop-filter: blur(12px);
    box-shadow: 0 12px 30px rgba(0,0,0,.25);
    transition: transform .12s ease, filter .2s ease, opacity .2s ease;
    user-select:none;
  }
  .btnSmall:active{transform: translateY(1px) scale(.99)}
  .btnSmall:hover{filter: brightness(1.06)}

  .hidden{display:none !important}

  .sliderWrap{
    border-top:1px solid rgba(255,255,255,.10);
    background: linear-gradient(180deg, rgba(0,0,0,.10), rgba(0,0,0,.22));
    padding: 14px 14px 18px;
    display:none;
  }
  .sliderWrap.show{display:block}

  .topBar{
    display:flex;
    justify-content:center;
    padding: 4px 0 12px;
  }

  .slider{
    display:flex;
    gap:16px;
    overflow-x:auto;
    scroll-snap-type:x mandatory;
    -webkit-overflow-scrolling: touch;
    padding: 8px 6px 14px;
  }
  .slider::-webkit-scrollbar{height:10px}
  .slider::-webkit-scrollbar-thumb{
    background: rgba(255,255,255,.18);
    border-radius:999px;
  }

  .slide{
    flex: 0 0 86%;
    scroll-snap-align:center;
    border-radius: 18px;
    overflow:hidden;
    background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
    border:1px solid rgba(255,255,255,.14);
    box-shadow: 0 16px 42px rgba(0,0,0,.35);
    transform: scale(.96);
    transition: transform .28s ease, box-shadow .28s ease;
  }
  .slide.active{
    transform: scale(1);
    box-shadow: 0 22px 58px rgba(0,0,0,.45);
  }
  @media(min-width: 860px){
    .slide{flex-basis: 58%;}
  }

  .media{
    height: clamp(260px, 48vw, 420px);
    background: rgba(255,255,255,.04);
  }
  .media img{
    width:100%;
    height:100%;
    object-fit:cover;
    display:block;
  }

  .caption{
    padding: 16px 16px 18px;
    font-size: clamp(16px, 2.6vw, 19px);
    line-height:1.55;
    color: rgba(255,255,255,.96);
    background: linear-gradient(180deg, rgba(0,0,0,.05), rgba(0,0,0,.18));
  }
  .caption strong{color:#fff}

  .finalMedia{
    height: clamp(260px, 48vw, 420px);
    display:flex;
    align-items:center;
    justify-content:center;
    background:
      radial-gradient(520px 260px at 30% 30%, rgba(255,77,141,.26), transparent 60%),
      radial-gradient(520px 260px at 70% 70%, rgba(255,134,178,.18), transparent 62%),
      linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
  }

  .heartBig{
    width: 170px; height: 170px;
    filter: drop-shadow(0 18px 30px rgba(0,0,0,.35));
    animation: pulse 1.6s ease-in-out infinite;
  }
  @keyframes pulse{
    0%,100%{transform: scale(1)}
    50%{transform: scale(1.08)}
  }

  .progress{
    display:flex;
    justify-content:center;
    gap:8px;
    padding-top: 6px;
  }
  .dot{
    width:8px; height:8px; border-radius:999px;
    background: rgba(255,255,255,.22);
    border:1px solid rgba(255,255,255,.14);
    transition: transform .15s ease, background .15s ease;
  }
  .dot.active{
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    transform: scale(1.35);
  }

  .fadeIn{
    animation: pop .5s ease both;
  }
  @keyframes pop{
    from{opacity:0; transform: translateY(10px) scale(.98)}
    to{opacity:1; transform: translateY(0) scale(1)}
  }
</style>
</head>

<body>
<div class="glow"></div>
<canvas id="hearts" aria-hidden="true"></canvas>

<div class="wrap">
  <main class="card" role="main">

    <section id="hero" class="hero">
      <h1 class="title">Валентины мэндчилгээ</h1>
      <div class="btnRow">
        <button id="openBtn" class="btn" type="button">Хайрт чамдаа</button>
      </div>
    </section>

    <section id="sliderWrap" class="sliderWrap">
      <div class="topBar">
        <button id="backBtn" class="btnSmall" type="button">⟵ Буцах</button>
      </div>

      <div id="slider" class="slider" tabindex="0" aria-label="Мэндчилгээний хуудсууд">
        <article class="slide" data-index="0">
          <div class="media">
            <img src="IMG_20260213_224340_259.jpg" alt="Зураг 1">
          </div>
          <div class="caption"><strong>Хайрт Т. Баасанжав танд</strong></div>
        </article>

        <article class="slide" data-index="1">
          <div class="media">
            <img src="IMG_20260213_224423_883.jpg" alt="Зураг 2">
          </div>
          <div class="caption">3 жил урт хугацаа боловч хамтдаа байхад нүд ирмэх зуур өнгөрсөн байна</div>
        </article>

        <article class="slide" data-index="2">
          <div class="media">
            <img src="IMG_20260212_183500.jpg" alt="Зураг 3">
          </div>
          <div class="caption">Цаашдаа ч мөн үргэлж хамтдаа байх болно</div>
        </article>

        <article class="slide" data-index="3">
          <div class="finalMedia">
            <svg class="heartBig" viewBox="0 0 64 64" fill="none" aria-hidden="true">
              <path d="M32 56s-18-10.8-24.6-22.7C1.8 22.1 8.6 10 21 12.2c5.5 1 9.1 5.6 11 9.1 1.9-3.5 5.5-8.1 11-9.1C55.4 10 62.2 22.1 56.6 33.3 50 45.2 32 56 32 56Z"
                fill="url(#g)"/>
              <defs>
                <linearGradient id="g" x1="12" y1="12" x2="52" y2="56" gradientUnits="userSpaceOnUse">
                  <stop stop-color="#ff4d8d"/><stop offset="1" stop-color="#ff86b2"/>
                </linearGradient>
              </defs>
            </svg>
          </div>
          <div class="caption">Сайхан чамдаа валентины баярын мэнд хүргэе. Дандаа хайртай шүү үнсэе. Хүндэтгэсэн: Таны хайрт залуу Г. Мөнх-Од</div>
        </article>
      </div>

      <div class="progress" aria-hidden="true">
        <span class="dot active" id="dot0"></span>
        <span class="dot" id="dot1"></span>
        <span class="dot" id="dot2"></span>
        <span class="dot" id="dot3"></span>
      </div>
    </section>

  </main>
</div>

<script>
  const openBtn = document.getElementById('openBtn');
  const backBtn = document.getElementById('backBtn');
  const hero = document.getElementById('hero');
  const sliderWrap = document.getElementById('sliderWrap');
  const slider = document.getElementById('slider');
  const dots = [0,1,2,3].map(i => document.getElementById('dot'+i));

  openBtn.addEventListener('click', () => {
    hero.classList.add('hidden');
    sliderWrap.classList.add('show','fadeIn');
    setTimeout(() => slider.children[0].scrollIntoView({behavior:'smooth', inline:'center'}), 140);
    requestAnimationFrame(updateDots);
  });

  backBtn.addEventListener('click', () => {
    sliderWrap.classList.remove('show','fadeIn');
    hero.classList.remove('hidden');
    slider.scrollTo({ left: 0, behavior: 'smooth' });
  });

  function updateDots(){
    const slides = Array.from(slider.querySelectorAll('.slide'));
    const centerX = slider.scrollLeft + slider.clientWidth/2;
    let bestIndex = 0, bestDist = Infinity;

    slides.forEach((s, i) => {
      const x = s.offsetLeft + s.clientWidth/2;
      const d = Math.abs(x - centerX);
      if(d < bestDist){ bestDist = d; bestIndex = i; }
    });

    slides.forEach((s,i) => s.classList.toggle('active', i===bestIndex));
    dots.forEach((d,i) => d.classList.toggle('active', i===bestIndex));
  }

  slider.addEventListener('scroll', () => requestAnimationFrame(updateDots));
  window.addEventListener('load', updateDots);

  // Hearts (canvas) — илүү гоё, дугуй биш жинхэнэ зүрх
  const canvas = document.getElementById('hearts');
  const ctx = canvas.getContext('2d', { alpha:true });

  function resize(){
    canvas.width = Math.floor(innerWidth * devicePixelRatio);
    canvas.height = Math.floor(innerHeight * devicePixelRatio);
    canvas.style.width = innerWidth + 'px';
    canvas.style.height = innerHeight + 'px';
    ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
  }
  addEventListener('resize', resize);
  resize();

  const hearts = [];
  const MAX = Math.min(80, Math.floor(innerWidth/16));
  const rand = (a,b)=>Math.random()*(b-a)+a;

  function spawn(){
    hearts.push({
      x: rand(0, innerWidth),
      y: rand(-40, -300),
      s: rand(8, 18),
      v: rand(0.7, 2.1),
      dx: rand(-0.5, 0.5),
      r: rand(-0.6, 0.6),
      dr: rand(-0.02, 0.02),
      a: rand(0.35, 0.85)
    });
    if(hearts.length>MAX) hearts.shift();
  }

  function drawHeart(x,y,s,r,a){
    ctx.save();
    ctx.translate(x,y);
    ctx.rotate(r);
    ctx.globalAlpha = a;

    const g = ctx.createLinearGradient(-s,-s,s,s);
    g.addColorStop(0,'rgba(255,77,141,1)');
    g.addColorStop(1,'rgba(255,134,178,1)');
    ctx.fillStyle = g;

    ctx.beginPath();
    const top = s*0.35;
    ctx.moveTo(0, top);
    ctx.bezierCurveTo(0, 0, -s, 0, -s, top);
    ctx.bezierCurveTo(-s, s, 0, s*1.25, 0, s*1.55);
    ctx.bezierCurveTo(0, s*1.25, s, s, s, top);
    ctx.bezierCurveTo(s, 0, 0, 0, 0, top);
    ctx.closePath();
    ctx.fill();

    ctx.restore();
  }

  for(let i=0;i<Math.floor(MAX*0.7);i++) spawn();

  function tick(){
    ctx.clearRect(0,0,innerWidth,innerHeight);
    if(Math.random()<0.40) spawn();

    for(const h of hearts){
      h.y += h.v;
      h.x += h.dx;
      h.r += h.dr;

      if(h.y > innerHeight + 60){
        h.y = rand(-80, -260);
        h.x = rand(0, innerWidth);
        h.s = rand(8, 18);
        h.v = rand(0.7, 2.1);
        h.dx = rand(-0.5, 0.5);
        h.a = rand(0.35, 0.85);
      }
      drawHeart(h.x,h.y,h.s,h.r,h.a);
    }
    requestAnimationFrame(tick);
  }
  tick();
</script>
</body>
</html>
